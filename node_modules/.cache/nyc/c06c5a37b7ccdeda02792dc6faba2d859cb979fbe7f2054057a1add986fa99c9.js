"use strict";var cov_2q3k7xjxwq=function(){var path="D:\\Property-Pro-Lite1\\server\\helpers\\auth.js";var hash="e9c2048dfe02675ddd81d5dae2c958253dec7f76";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"D:\\Property-Pro-Lite1\\server\\helpers\\auth.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:6,column:0},end:{line:6,column:28}},"2":{start:{line:8,column:20},end:{line:8,column:67}},"3":{start:{line:10,column:39},end:{line:10,column:95}},"4":{start:{line:12,column:77},end:{line:12,column:175}},"5":{start:{line:12,column:94},end:{line:12,column:107}},"6":{start:{line:12,column:121},end:{line:12,column:131}},"7":{start:{line:12,column:151},end:{line:12,column:165}},"8":{start:{line:12,column:166},end:{line:12,column:173}},"9":{start:{line:12,column:176},end:{line:12,column:263}},"10":{start:{line:12,column:193},end:{line:12,column:208}},"11":{start:{line:12,column:218},end:{line:12,column:261}},"12":{start:{line:14,column:33},end:{line:14,column:387}},"13":{start:{line:14,column:65},end:{line:14,column:69}},"14":{start:{line:14,column:78},end:{line:14,column:87}},"15":{start:{line:14,column:89},end:{line:14,column:384}},"16":{start:{line:14,column:147},end:{line:14,column:167}},"17":{start:{line:14,column:193},end:{line:14,column:264}},"18":{start:{line:14,column:290},end:{line:14,column:360}},"19":{start:{line:14,column:363},end:{line:14,column:380}},"20":{start:{line:26,column:0},end:{line:74,column:3}},"21":{start:{line:27,column:13},end:{line:69,column:5}},"22":{start:{line:31,column:4},end:{line:68,column:32}},"23":{start:{line:32,column:6},end:{line:67,column:7}},"24":{start:{line:33,column:8},end:{line:66,column:9}},"25":{start:{line:35,column:12},end:{line:35,column:47}},"26":{start:{line:37,column:12},end:{line:40,column:13}},"27":{start:{line:38,column:14},end:{line:38,column:32}},"28":{start:{line:39,column:14},end:{line:39,column:20}},"29":{start:{line:42,column:12},end:{line:45,column:16}},"30":{start:{line:48,column:12},end:{line:48,column:30}},"31":{start:{line:49,column:12},end:{line:49,column:74}},"32":{start:{line:50,column:12},end:{line:50,column:36}},"33":{start:{line:51,column:12},end:{line:51,column:19}},"34":{start:{line:52,column:12},end:{line:52,column:31}},"35":{start:{line:53,column:12},end:{line:53,column:18}},"36":{start:{line:56,column:12},end:{line:56,column:30}},"37":{start:{line:57,column:12},end:{line:57,column:47}},"38":{start:{line:58,column:12},end:{line:61,column:16}},"39":{start:{line:65,column:12},end:{line:65,column:35}},"40":{start:{line:71,column:2},end:{line:73,column:4}},"41":{start:{line:72,column:4},end:{line:72,column:39}},"42":{start:{line:85,column:0},end:{line:124,column:3}},"43":{start:{line:86,column:14},end:{line:119,column:5}},"44":{start:{line:90,column:4},end:{line:118,column:17}},"45":{start:{line:91,column:6},end:{line:117,column:7}},"46":{start:{line:92,column:8},end:{line:116,column:9}},"47":{start:{line:94,column:12},end:{line:98,column:14}},"48":{start:{line:99,column:12},end:{line:99,column:31}},"49":{start:{line:100,column:12},end:{line:111,column:15}},"50":{start:{line:103,column:14},end:{line:103,column:33}},"51":{start:{line:103,column:23},end:{line:103,column:33}},"52":{start:{line:104,column:14},end:{line:110,column:17}},"53":{start:{line:115,column:12},end:{line:115,column:36}},"54":{start:{line:121,column:2},end:{line:123,column:4}},"55":{start:{line:122,column:4},end:{line:122,column:40}},"56":{start:{line:126,column:15},end:{line:129,column:1}},"57":{start:{line:130,column:0},end:{line:130,column:30}}},fnMap:{"0":{name:"_interopRequireDefault",decl:{start:{line:10,column:9},end:{line:10,column:31}},loc:{start:{line:10,column:37},end:{line:10,column:97}},line:10},"1":{name:"asyncGeneratorStep",decl:{start:{line:12,column:9},end:{line:12,column:27}},loc:{start:{line:12,column:75},end:{line:12,column:265}},line:12},"2":{name:"_asyncToGenerator",decl:{start:{line:14,column:9},end:{line:14,column:26}},loc:{start:{line:14,column:31},end:{line:14,column:389}},line:14},"3":{name:"(anonymous_3)",decl:{start:{line:14,column:40},end:{line:14,column:41}},loc:{start:{line:14,column:52},end:{line:14,column:386}},line:14},"4":{name:"(anonymous_4)",decl:{start:{line:14,column:108},end:{line:14,column:109}},loc:{start:{line:14,column:135},end:{line:14,column:382}},line:14},"5":{name:"_next",decl:{start:{line:14,column:178},end:{line:14,column:183}},loc:{start:{line:14,column:191},end:{line:14,column:266}},line:14},"6":{name:"_throw",decl:{start:{line:14,column:276},end:{line:14,column:282}},loc:{start:{line:14,column:288},end:{line:14,column:362}},line:14},"7":{name:"(anonymous_7)",decl:{start:{line:26,column:0},end:{line:26,column:1}},loc:{start:{line:26,column:12},end:{line:74,column:1}},line:26},"8":{name:"_callee",decl:{start:{line:29,column:35},end:{line:29,column:42}},loc:{start:{line:29,column:59},end:{line:69,column:3}},line:29},"9":{name:"_callee$",decl:{start:{line:31,column:44},end:{line:31,column:52}},loc:{start:{line:31,column:63},end:{line:68,column:5}},line:31},"10":{name:"authMiddleware",decl:{start:{line:71,column:18},end:{line:71,column:32}},loc:{start:{line:71,column:47},end:{line:73,column:3}},line:71},"11":{name:"(anonymous_11)",decl:{start:{line:85,column:0},end:{line:85,column:1}},loc:{start:{line:85,column:12},end:{line:124,column:1}},line:85},"12":{name:"_callee2",decl:{start:{line:88,column:35},end:{line:88,column:43}},loc:{start:{line:88,column:61},end:{line:119,column:3}},line:88},"13":{name:"_callee2$",decl:{start:{line:90,column:44},end:{line:90,column:53}},loc:{start:{line:90,column:65},end:{line:118,column:5}},line:90},"14":{name:"(anonymous_14)",decl:{start:{line:102,column:15},end:{line:102,column:16}},loc:{start:{line:102,column:37},end:{line:111,column:13}},line:102},"15":{name:"payloader",decl:{start:{line:121,column:18},end:{line:121,column:27}},loc:{start:{line:121,column:43},end:{line:123,column:3}},line:121}},branchMap:{"0":{loc:{start:{line:10,column:46},end:{line:10,column:94}},type:"cond-expr",locations:[{start:{line:10,column:70},end:{line:10,column:73}},{start:{line:10,column:76},end:{line:10,column:94}}],line:10},"1":{loc:{start:{line:10,column:46},end:{line:10,column:67}},type:"binary-expr",locations:[{start:{line:10,column:46},end:{line:10,column:49}},{start:{line:10,column:53},end:{line:10,column:67}}],line:10},"2":{loc:{start:{line:12,column:176},end:{line:12,column:263}},type:"if",locations:[{start:{line:12,column:176},end:{line:12,column:263}},{start:{line:12,column:176},end:{line:12,column:263}}],line:12},"3":{loc:{start:{line:33,column:8},end:{line:66,column:9}},type:"switch",locations:[{start:{line:34,column:10},end:{line:45,column:16}},{start:{line:47,column:10},end:{line:53,column:18}},{start:{line:55,column:10},end:{line:61,column:16}},{start:{line:63,column:10},end:{line:63,column:18}},{start:{line:64,column:10},end:{line:65,column:35}}],line:33},"4":{loc:{start:{line:37,column:12},end:{line:40,column:13}},type:"if",locations:[{start:{line:37,column:12},end:{line:40,column:13}},{start:{line:37,column:12},end:{line:40,column:13}}],line:37},"5":{loc:{start:{line:92,column:8},end:{line:116,column:9}},type:"switch",locations:[{start:{line:93,column:10},end:{line:111,column:15}},{start:{line:113,column:10},end:{line:113,column:17}},{start:{line:114,column:10},end:{line:115,column:36}}],line:92},"6":{loc:{start:{line:103,column:14},end:{line:103,column:33}},type:"if",locations:[{start:{line:103,column:14},end:{line:103,column:33}},{start:{line:103,column:14},end:{line:103,column:33}}],line:103}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0,0,0,0],"4":[0,0],"5":[0,0,0],"6":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184",hash:"e9c2048dfe02675ddd81d5dae2c958253dec7f76"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}return coverage[path]=coverageData;}();cov_2q3k7xjxwq.s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_2q3k7xjxwq.s[1]++;exports["default"]=void 0;var _jsonwebtoken=(cov_2q3k7xjxwq.s[2]++,_interopRequireDefault(require("jsonwebtoken")));function _interopRequireDefault(obj){cov_2q3k7xjxwq.f[0]++;cov_2q3k7xjxwq.s[3]++;return(cov_2q3k7xjxwq.b[1][0]++,obj)&&(cov_2q3k7xjxwq.b[1][1]++,obj.__esModule)?(cov_2q3k7xjxwq.b[0][0]++,obj):(cov_2q3k7xjxwq.b[0][1]++,{"default":obj});}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){cov_2q3k7xjxwq.f[1]++;cov_2q3k7xjxwq.s[4]++;try{var info=(cov_2q3k7xjxwq.s[5]++,gen[key](arg));var value=(cov_2q3k7xjxwq.s[6]++,info.value);}catch(error){cov_2q3k7xjxwq.s[7]++;reject(error);cov_2q3k7xjxwq.s[8]++;return;}cov_2q3k7xjxwq.s[9]++;if(info.done){cov_2q3k7xjxwq.b[2][0]++;cov_2q3k7xjxwq.s[10]++;resolve(value);}else{cov_2q3k7xjxwq.b[2][1]++;cov_2q3k7xjxwq.s[11]++;Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){cov_2q3k7xjxwq.f[2]++;cov_2q3k7xjxwq.s[12]++;return function(){cov_2q3k7xjxwq.f[3]++;var self=(cov_2q3k7xjxwq.s[13]++,this),args=(cov_2q3k7xjxwq.s[14]++,arguments);cov_2q3k7xjxwq.s[15]++;return new Promise(function(resolve,reject){cov_2q3k7xjxwq.f[4]++;var gen=(cov_2q3k7xjxwq.s[16]++,fn.apply(self,args));function _next(value){cov_2q3k7xjxwq.f[5]++;cov_2q3k7xjxwq.s[17]++;asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){cov_2q3k7xjxwq.f[6]++;cov_2q3k7xjxwq.s[18]++;asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}cov_2q3k7xjxwq.s[19]++;_next(undefined);});};}/**
 * Authenticates a User.
 * @param {object} req the request object.
 * @param {object} res the response object.
 * @param {object} next calls the next middleware.
 * @return  {Function} next calls the next middleware
 *
*/var authMiddleware=(/*#__PURE__*/cov_2q3k7xjxwq.s[20]++,function(){cov_2q3k7xjxwq.f[7]++;var _ref=(cov_2q3k7xjxwq.s[21]++,_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee(req,res,next){cov_2q3k7xjxwq.f[8]++;var token,decoded;cov_2q3k7xjxwq.s[22]++;return regeneratorRuntime.wrap(function _callee$(_context){cov_2q3k7xjxwq.f[9]++;cov_2q3k7xjxwq.s[23]++;while(1){cov_2q3k7xjxwq.s[24]++;switch(_context.prev=_context.next){case 0:cov_2q3k7xjxwq.b[3][0]++;cov_2q3k7xjxwq.s[25]++;token=req.header('x-auth-token');cov_2q3k7xjxwq.s[26]++;if(token){cov_2q3k7xjxwq.b[4][0]++;cov_2q3k7xjxwq.s[27]++;_context.next=3;cov_2q3k7xjxwq.s[28]++;break;}else{cov_2q3k7xjxwq.b[4][1]++;}cov_2q3k7xjxwq.s[29]++;return _context.abrupt("return",res.status(401).send({status:'error',error:'No token, auth denied'}));case 3:cov_2q3k7xjxwq.b[3][1]++;cov_2q3k7xjxwq.s[30]++;_context.prev=3;cov_2q3k7xjxwq.s[31]++;decoded=_jsonwebtoken["default"].verify(token,'jwtSecret');cov_2q3k7xjxwq.s[32]++;req.user=decoded.user;cov_2q3k7xjxwq.s[33]++;next();cov_2q3k7xjxwq.s[34]++;_context.next=12;cov_2q3k7xjxwq.s[35]++;break;case 9:cov_2q3k7xjxwq.b[3][2]++;cov_2q3k7xjxwq.s[36]++;_context.prev=9;cov_2q3k7xjxwq.s[37]++;_context.t0=_context["catch"](3);cov_2q3k7xjxwq.s[38]++;return _context.abrupt("return",res.status(401).send({status:'error',error:'Invalid Token'}));case 12:cov_2q3k7xjxwq.b[3][3]++;case"end":cov_2q3k7xjxwq.b[3][4]++;cov_2q3k7xjxwq.s[39]++;return _context.stop();}}},_callee,null,[[3,9]]);})));cov_2q3k7xjxwq.s[40]++;return function authMiddleware(_x,_x2,_x3){cov_2q3k7xjxwq.f[10]++;cov_2q3k7xjxwq.s[41]++;return _ref.apply(this,arguments);};}());/**
 * Payload middleware/helper function.
 * @param {object} res the response object.
 * @param {object} data the payload parameter.
 *
*/var payloader=(/*#__PURE__*/cov_2q3k7xjxwq.s[42]++,function(){cov_2q3k7xjxwq.f[11]++;var _ref2=(cov_2q3k7xjxwq.s[43]++,_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee2(res,data,code){cov_2q3k7xjxwq.f[12]++;var payload;cov_2q3k7xjxwq.s[44]++;return regeneratorRuntime.wrap(function _callee2$(_context2){cov_2q3k7xjxwq.f[13]++;cov_2q3k7xjxwq.s[45]++;while(1){cov_2q3k7xjxwq.s[46]++;switch(_context2.prev=_context2.next){case 0:cov_2q3k7xjxwq.b[5][0]++;cov_2q3k7xjxwq.s[47]++;payload={user:{id:data.id}};cov_2q3k7xjxwq.s[48]++;_context2.next=3;cov_2q3k7xjxwq.s[49]++;return _jsonwebtoken["default"].sign(payload,'jwtSecret',{expiresIn:'7d'},function(err,token){cov_2q3k7xjxwq.f[14]++;cov_2q3k7xjxwq.s[50]++;if(err){cov_2q3k7xjxwq.b[6][0]++;cov_2q3k7xjxwq.s[51]++;throw err;}else{cov_2q3k7xjxwq.b[6][1]++;}cov_2q3k7xjxwq.s[52]++;return res.status(code).send({status:'success',data:{token:token,data:data}});});case 3:cov_2q3k7xjxwq.b[5][1]++;case"end":cov_2q3k7xjxwq.b[5][2]++;cov_2q3k7xjxwq.s[53]++;return _context2.stop();}}},_callee2);})));cov_2q3k7xjxwq.s[54]++;return function payloader(_x4,_x5,_x6){cov_2q3k7xjxwq.f[15]++;cov_2q3k7xjxwq.s[55]++;return _ref2.apply(this,arguments);};}());var _default=(cov_2q3k7xjxwq.s[56]++,{authMiddleware:authMiddleware,payloader:payloader});cov_2q3k7xjxwq.s[57]++;exports["default"]=_default;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGguanMiXSwibmFtZXMiOlsiYXV0aE1pZGRsZXdhcmUiLCJyZXEiLCJyZXMiLCJuZXh0IiwidG9rZW4iLCJoZWFkZXIiLCJzdGF0dXMiLCJzZW5kIiwiZXJyb3IiLCJkZWNvZGVkIiwiand0IiwidmVyaWZ5IiwidXNlciIsInBheWxvYWRlciIsImRhdGEiLCJjb2RlIiwicGF5bG9hZCIsImlkIiwic2lnbiIsImV4cGlyZXNJbiIsImVyciJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7Ozs7OztBQUVBOzs7Ozs7OztBQVNBLElBQU1BLGNBQWM7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLDBCQUFHLGlCQUFPQyxHQUFQLEVBQVlDLEdBQVosRUFBaUJDLElBQWpCO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNmQyxZQUFBQSxLQURlLEdBQ1BILEdBQUcsQ0FBQ0ksTUFBSixDQUFXLGNBQVgsQ0FETzs7QUFBQSxnQkFFaEJELEtBRmdCO0FBQUE7QUFBQTtBQUFBOztBQUFBLDZDQUdaRixHQUFHLENBQUNJLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQjtBQUMxQkQsY0FBQUEsTUFBTSxFQUFFLE9BRGtCO0FBRTFCRSxjQUFBQSxLQUFLLEVBQUU7QUFGbUIsYUFBckIsQ0FIWTs7QUFBQTtBQUFBO0FBU2JDLFlBQUFBLE9BVGEsR0FTSEMseUJBQUlDLE1BQUosQ0FBV1AsS0FBWCxFQUFrQixXQUFsQixDQVRHO0FBVW5CSCxZQUFBQSxHQUFHLENBQUNXLElBQUosR0FBV0gsT0FBTyxDQUFDRyxJQUFuQjtBQUNBVCxZQUFBQSxJQUFJO0FBWGU7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQSw2Q0FhWkQsR0FBRyxDQUFDSSxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUI7QUFDMUJELGNBQUFBLE1BQU0sRUFBRSxPQURrQjtBQUUxQkUsY0FBQUEsS0FBSyxFQUFFO0FBRm1CLGFBQXJCLENBYlk7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsR0FBSDs7QUFBQSxrQkFBZFIsY0FBYztBQUFBO0FBQUE7QUFBQSxHQUFwQjtBQW9CQTs7Ozs7Ozs7QUFPQSxJQUFNYSxTQUFTO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSwwQkFBRyxrQkFBT1gsR0FBUCxFQUFZWSxJQUFaLEVBQWtCQyxJQUFsQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDVkMsWUFBQUEsT0FEVSxHQUNBO0FBQ2RKLGNBQUFBLElBQUksRUFBRTtBQUNKSyxnQkFBQUEsRUFBRSxFQUFFSCxJQUFJLENBQUNHO0FBREw7QUFEUSxhQURBO0FBQUE7QUFBQSxtQkFNVlAseUJBQUlRLElBQUosQ0FDSkYsT0FESSxFQUVKLFdBRkksRUFHSjtBQUFFRyxjQUFBQSxTQUFTLEVBQUU7QUFBYixhQUhJLEVBSUosVUFBQ0MsR0FBRCxFQUFNaEIsS0FBTixFQUFnQjtBQUNkLGtCQUFJZ0IsR0FBSixFQUFTLE1BQU1BLEdBQU47QUFDVCxxQkFBT2xCLEdBQUcsQ0FBQ0ksTUFBSixDQUFXUyxJQUFYLEVBQWlCUixJQUFqQixDQUFzQjtBQUMzQkQsZ0JBQUFBLE1BQU0sRUFBRSxTQURtQjtBQUUzQlEsZ0JBQUFBLElBQUksRUFBRTtBQUNKVixrQkFBQUEsS0FBSyxFQUFMQSxLQURJO0FBRUpVLGtCQUFBQSxJQUFJLEVBQUpBO0FBRkk7QUFGcUIsZUFBdEIsQ0FBUDtBQU9ELGFBYkcsQ0FOVTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxHQUFIOztBQUFBLGtCQUFURCxTQUFTO0FBQUE7QUFBQTtBQUFBLEdBQWY7O2VBdUJlO0FBQUViLEVBQUFBLGNBQWMsRUFBZEEsY0FBRjtBQUFrQmEsRUFBQUEsU0FBUyxFQUFUQTtBQUFsQixDIiwic291cmNlUm9vdCI6IkQ6XFxQcm9wZXJ0eS1Qcm8tTGl0ZTFcXHNlcnZlclxcaGVscGVycyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJztcclxuXHJcbi8qKlxyXG4gKiBBdXRoZW50aWNhdGVzIGEgVXNlci5cclxuICogQHBhcmFtIHtvYmplY3R9IHJlcSB0aGUgcmVxdWVzdCBvYmplY3QuXHJcbiAqIEBwYXJhbSB7b2JqZWN0fSByZXMgdGhlIHJlc3BvbnNlIG9iamVjdC5cclxuICogQHBhcmFtIHtvYmplY3R9IG5leHQgY2FsbHMgdGhlIG5leHQgbWlkZGxld2FyZS5cclxuICogQHJldHVybiAge0Z1bmN0aW9ufSBuZXh0IGNhbGxzIHRoZSBuZXh0IG1pZGRsZXdhcmVcclxuICpcclxuKi9cclxuXHJcbmNvbnN0IGF1dGhNaWRkbGV3YXJlID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XHJcbiAgY29uc3QgdG9rZW4gPSByZXEuaGVhZGVyKCd4LWF1dGgtdG9rZW4nKTtcclxuICBpZiAoIXRva2VuKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLnNlbmQoe1xyXG4gICAgICBzdGF0dXM6ICdlcnJvcicsXHJcbiAgICAgIGVycm9yOiAnTm8gdG9rZW4sIGF1dGggZGVuaWVkJ1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiwgJ2p3dFNlY3JldCcpO1xyXG4gICAgcmVxLnVzZXIgPSBkZWNvZGVkLnVzZXI7XHJcbiAgICBuZXh0KCk7XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLnNlbmQoe1xyXG4gICAgICBzdGF0dXM6ICdlcnJvcicsXHJcbiAgICAgIGVycm9yOiAnSW52YWxpZCBUb2tlbidcclxuICAgIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbi8qKlxyXG4gKiBQYXlsb2FkIG1pZGRsZXdhcmUvaGVscGVyIGZ1bmN0aW9uLlxyXG4gKiBAcGFyYW0ge29iamVjdH0gcmVzIHRoZSByZXNwb25zZSBvYmplY3QuXHJcbiAqIEBwYXJhbSB7b2JqZWN0fSBkYXRhIHRoZSBwYXlsb2FkIHBhcmFtZXRlci5cclxuICpcclxuKi9cclxuXHJcbmNvbnN0IHBheWxvYWRlciA9IGFzeW5jIChyZXMsIGRhdGEsIGNvZGUpID0+IHtcclxuICBjb25zdCBwYXlsb2FkID0ge1xyXG4gICAgdXNlcjoge1xyXG4gICAgICBpZDogZGF0YS5pZFxyXG4gICAgfVxyXG4gIH07XHJcbiAgYXdhaXQgand0LnNpZ24oXHJcbiAgICBwYXlsb2FkLFxyXG4gICAgJ2p3dFNlY3JldCcsXHJcbiAgICB7IGV4cGlyZXNJbjogJzdkJyB9LFxyXG4gICAgKGVyciwgdG9rZW4pID0+IHtcclxuICAgICAgaWYgKGVycikgdGhyb3cgZXJyO1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyhjb2RlKS5zZW5kKHtcclxuICAgICAgICBzdGF0dXM6ICdzdWNjZXNzJyxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICB0b2tlbixcclxuICAgICAgICAgIGRhdGEsXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICApO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgeyBhdXRoTWlkZGxld2FyZSwgcGF5bG9hZGVyIH07XHJcbiJdfQ==